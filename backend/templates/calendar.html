{% extends 'base.html' %}

{% block title %}Pace · Calendar{% endblock %}

{% block content %}
<section class="page-heading">
    <div>
        <p class="eyebrow">Calendar</p>
        <h1>Shape your calendar around recovery, not just delivery.</h1>
        <p class="lede">Glance at the month ahead, add intentional breaks, and sync with agents that know your capacity.</p>
    </div>
    <div class="callout-card">
        <h3>Tip</h3>
        <p>Pair each intense block with a deliberate reset—even five minutes is enough to prevent context fatigue.</p>
    </div>
</section>

<section class="calendar-actions">
    <div class="event-form-wrapper">
        <button id="toggleEventForm" class="secondary-button">➕ Add restorative block</button>
        <form id="addEventForm" class="event-form" hidden>
            <div class="field">
                <label for="eventSummary">Title</label>
                <input type="text" id="eventSummary" placeholder="Walk-and-reset or focus sprint" required>
            </div>
            <div class="field">
                <label for="eventDescription">Description</label>
                <textarea id="eventDescription" rows="2" placeholder="Optional context for future you"></textarea>
            </div>
            <div class="field-grid">
                <div class="field">
                    <label for="eventStartOffset">Starts in (hours)</label>
                    <input type="number" id="eventStartOffset" min="0" step="0.5" value="1">
                </div>
                <div class="field">
                    <label for="eventDuration">Duration (hours)</label>
                    <input type="number" id="eventDuration" min="0.25" step="0.25" value="1">
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="primary-button">Create event</button>
                <button type="button" id="cancelEventForm" class="ghost-button">Cancel</button>
            </div>
            <p id="eventStatus" class="helper-text">Events sync directly to your primary Google Calendar.</p>
        </form>
    </div>
    <div class="break-suggestions">
        <h2>Suggested breaks</h2>
        <p class="helper-text">Coming soon: request fresh breaks from your agent after each vent. For now, use these starter ideas.</p>
        <button id="refreshBreaks" class="ghost-button">Refresh ideas</button>
        <ul class="idea-list" id="breakSuggestions">
            <li>Take a 7-minute stretch between back-to-back calls.</li>
            <li>Mark a 30-minute focus block followed by a 5-minute reset.</li>
            <li>Plan a short walk during your longest meeting day.</li>
        </ul>
    </div>
</section>

<section class="calendar-feed">
    <header class="feed-header">
        <h2>Upcoming events</h2>
        <button id="refreshEvents" class="ghost-button">Refresh</button>
    </header>
    <div class="event-list" id="eventList">
        {% if events %}
            {% for event in events %}
            <article class="event-card">
                <div class="event-summary">
                    <h3>{{ event.summary or 'Untitled event' }}</h3>
                    <p class="event-time">
                        {{ event.start.get('dateTime', event.start.get('date')) }}
                        {% if event.end %}
                            · Ends {{ event.end.get('dateTime', event.end.get('date')) }}
                        {% endif %}
                    </p>
                </div>
                {% if event.description %}
                <p class="event-description">{{ event.description }}</p>
                {% endif %}
            </article>
            {% endfor %}
        {% else %}
            <p class="placeholder">No upcoming events detected. Sync with Google to load your schedule.</p>
        {% endif %}
    </div>
</section>
{% endblock %}